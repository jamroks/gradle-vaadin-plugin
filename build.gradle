apply plugin: 'groovy'

repositories{
	mavenCentral()
}

configurations {
    deployerJars
}

dependencies {
    compile gradleApi()
    groovy localGroovy()
    compile group:'com.google.gwt',	name:'gwt-dev', version:'2.5.0'
    deployerJars "org.apache.maven.wagon:wagon-ftp:1.0-beta-2"
}

apply plugin: 'maven'

group = "fi.jasoft.plugin"
version = "0.3.2"
archivesBaseName = 'VaadinPlugin'

uploadArchives {
    repositories.mavenDeployer {
        def repo = System.getProperty('PLUGIN_MAVEN_REPOSITORY', '<plugin repository not defined>') 
        def user = System.getProperty('PLUGIN_MAVEN_REPOSITORY_USER', '<user not defined>')
        def password = System.getProperty('PLUGIN_MAVEN_REPOSITORY_PASSWORD', '<password not defined>')

        name = 'sshDeployer' 
        configuration = configurations.deployerJars
        repository(url: repo) {
            authentication(userName: user, password: password)
        }
	    pom.project {
	            licenses {
	                license {
	                    name 'The Apache Software License, Version 2.0'
	                    url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
	                    distribution 'repo'
	                }
	            }
	    }

	    pom.scopeMappings.mappings.remove(configurations.compile)
    }

    repositories
}

// Use wrapper
task wrapper(type: Wrapper) { gradleVersion = '1.3' }
